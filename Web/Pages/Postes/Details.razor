@page "/postes/details/{id:int}"
@layout AppLayout

@using Shareds.Modeles;
@using Services;

@inject UserService userService

<PageTitle>Details poste</PageTitle>

<div class="container">
    <div class="poste-infos">
        <div class="poste-info">
            <div class="infos details">
                <div>
                    <h6>ID</h6>
                    <p>@poste.Id</p>
                </div>
                <div>
                    <h6>N° Poste</h6>
                    <p>@poste.Numero</p>
                </div>
                <div>
                    <h6>N° Salle</h6>
                    <p>@salle.Numero</p>
                </div>
                <div>
                    <h6>Type</h6>
                    <p>@type.Libelle</p>
                </div>
                <div>
                    <h6>Statut</h6>
                    @if (poste.Statut == true)
                    {
                        <p>Connecté</p>
                    }
                    else
                    {
                        <p>Déconnecté</p>
                    }
                </div>
                <div>
                    <h6>Marque</h6>
                    <p>@poste.Marque</p>
                </div>
                <div>
                    <h6>Adresse IP</h6>
                    <p>@poste.AdresseIP</p>
                </div>
                <div>
                    <h6>Adresse MAC</h6>
                    <p>@poste.AdresseMAC</p>
                </div>
                <div>
                    <h6>ROM</h6>
                    <p>@poste.ROM GO</p>
                </div>
                <div>
                    <h6>RAM</h6>
                    <p> @poste.RAM GO</p>
                </div>
                <div>
                    <h6>SE</h6>
                    <p>@poste.SE</p>
                </div>
            </div>
            <div class="infos infos-ram">
            </div>
        </div>
        <div class="poste-info screen">
               dd
        </div>
    </div>
    <div class="poste-controls">

    </div>
</div>

@code {
    [Parameter]
    public int id { get; set; }

    private SalleModele salle = new SalleModele();
    private SalleService salleService = new SalleService();

    private PosteModele poste = new PosteModele();
    private PosteService posteService = new PosteService();

    private TypeModele type = new TypeModele();
    private TypeService typeService = new TypeService();

    protected override async Task OnInitializedAsync()
    {
        await GetPostDetails(id);
    }

    private async Task GetPostDetails(int id)
    {
        string userToken = await userService.GetUserToken();

        if(userToken is not null)
        {
            poste = await posteService.GetById(id, userToken);
            salle = await salleService.GetById(poste.IdSalle, userToken);        
        }

        type = await typeService.GetById(poste.IdType);
    }
}